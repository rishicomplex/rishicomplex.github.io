<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2024-10-07T23:30:10+01:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">rishicomplex’s blog</title><subtitle>A vessel for my thoughts.</subtitle><entry><title type="html">What’s the best strategy when playing HORSE?</title><link href="http://localhost:4000/2020/12/25/whats-the-best-strategy-when-playing-horse.html" rel="alternate" type="text/html" title="What&apos;s the best strategy when playing HORSE?" /><published>2020-12-25T08:00:00+00:00</published><updated>2020-12-25T08:00:00+00:00</updated><id>http://localhost:4000/2020/12/25/whats-the-best-strategy-when-playing-horse</id><content type="html" xml:base="http://localhost:4000/2020/12/25/whats-the-best-strategy-when-playing-horse.html">&lt;script src=&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;

&lt;p&gt;&lt;strong&gt;TL;DR&lt;/strong&gt;: If you want to win at HORSE, it’s generally a much better strategy to attempt high percentage shots. It almost never makes sense to shoot crazy half-court shots or behind-the-back shots. As a general rule of thumb, never attempt shots that you can’t shoot at &amp;gt;50%.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;
&lt;a href=&quot;https://en.wikipedia.org/wiki/Variations_of_basketball#H-O-R-S-E&quot;&gt;HORSE&lt;/a&gt; is a popular basketball shooting game. The main choice a HORSE player must make is which spots on the basketball court to attempt shots from. What’s the best strategy to win at HORSE?&lt;/p&gt;

&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#game-rules&quot; id=&quot;markdown-toc-game-rules&quot;&gt;Game rules&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#expected-number-of-turns&quot; id=&quot;markdown-toc-expected-number-of-turns&quot;&gt;Expected number of turns&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#deriving-the-formula&quot; id=&quot;markdown-toc-deriving-the-formula&quot;&gt;Deriving the formula&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#visualizing-the-expected-number-of-turns&quot; id=&quot;markdown-toc-visualizing-the-expected-number-of-turns&quot;&gt;Visualizing the expected number of turns&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#verification-via-simulation&quot; id=&quot;markdown-toc-verification-via-simulation&quot;&gt;Verification via simulation&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#analyzing-some-special-cases&quot; id=&quot;markdown-toc-analyzing-some-special-cases&quot;&gt;Analyzing some special cases&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#both-players-are-equally-good-shooters&quot; id=&quot;markdown-toc-both-players-are-equally-good-shooters&quot;&gt;Both players are equally good shooters&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#player-1-is-a-slightly-better-shooter-than-player-2&quot; id=&quot;markdown-toc-player-1-is-a-slightly-better-shooter-than-player-2&quot;&gt;Player 1 is a slightly better shooter than Player 2&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#player-2-is-a-slightly-better-shooter-than-player-1&quot; id=&quot;markdown-toc-player-2-is-a-slightly-better-shooter-than-player-1&quot;&gt;Player 2 is a slightly better shooter than Player 1&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#real-world-strategies&quot; id=&quot;markdown-toc-real-world-strategies&quot;&gt;Real world strategies&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;game-rules&quot;&gt;Game rules&lt;/h3&gt;
&lt;p&gt;The version of HORSE I’m analysing here involves two players. In the beginning, it’s Player 1’s turn. The player whose turn it is will be called “C”, and the other player will be called “O”.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;C picks a spot on the basketball court and attempts a shot.
    &lt;ul&gt;
      &lt;li&gt;If C misses the shot, it is O’s turn, and we go back to 1.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;If C makes the shot, O must now attempt the same shot.
    &lt;ul&gt;
      &lt;li&gt;If O makes the shot, C’s turn continues, and we go back to 1.&lt;/li&gt;
      &lt;li&gt;If O misses the shot, they get a letter. C’s turn continues, and we go back to 1.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Once any player has gotten 5 letters, ie HORSE, they lose the game.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;On Player 2’s turn, Player 1 has no real strategy - they must simply try their best to make the shots that Player 2 makes. The only strategy a player can control is which shots they attempt when it’s their turn.&lt;/p&gt;

&lt;h3 id=&quot;expected-number-of-turns&quot;&gt;Expected number of turns&lt;/h3&gt;

&lt;h4 id=&quot;deriving-the-formula&quot;&gt;Deriving the formula&lt;/h4&gt;

&lt;p&gt;Let us calculate the optimal shot on Player 1’s turn. Note that a “turn” lasts as long as the player whose turn it is does not miss their shot. We will assume that Player 1 will shoot the same optimal shot each time it is their turn. Let \(p_1\) be the probability that Player 1 makes this shot, \(p_2\) be the probability that Player 2 makes the same shot, and \(e_N\) be the expected number of turns for Player 1 to win \(N\) letters.&lt;/p&gt;

&lt;p&gt;If Player 1 misses the shot, the expected number of turns going forward is \(1 + e_N\), since Player 1 has used up the current turn, and must restart in the same position next turn. If Player 1 makes the shot, and Player 2 misses the shot, the expected number of turns is \(e_{N-1}\), since the turn continues with one less letter to win. Finally, if Player 1 and Player 2 both make the shot, the expected number of turns is simply \(e_N\). Putting these together, we have&lt;/p&gt;

\[\begin{equation}
e_N = (1 - p_1) (1 + e_N) + p_1 (1 - p_2) e_{N - 1} + p_1 p_2 e_N
\end{equation}\]

&lt;p&gt;Re-arranging and expanding for \(e_{N-1},e_{N-2}\ldots e_0\), we get&lt;/p&gt;

\[\begin{eqnarray}
e_N - e_{N - 1} &amp;amp;= \frac{1 - p_1}{p_1 (1 - p_2)} \\
\vdots \\
e_1 - e_0 &amp;amp;= \frac{1 - p_1}{p_1 (1 - p_2)}
\end{eqnarray}\]

&lt;p&gt;\(e_0\) must be \(1\), since \(p_1=1, p_2=0 \implies e_1=1\). Adding the equations above and re-arranging, we get&lt;/p&gt;

\[e_N = 1 + N\frac{1 - p_1}{p_1 (1 - p_2)}\]

&lt;p&gt;For the game of HORSE, \(N=5\), and so the expected number of turns to win HORSE is&lt;/p&gt;

\[e_5 = 1 + 5\frac{1 - p_1}{p_1 (1 - p_2)} \tag{1} \label{eq:one}\]

&lt;p&gt;Our goal is to minimize \(e_5\). \(e_5\) increases with the inverse of the quantities \(\frac{p_1}{1 - p_1}\) and \((1 - p_2)\). Since the former grows much faster than the latter, we can intuit that increasing \(p_1\) is a lot more important than decreasing \(p_2\).&lt;/p&gt;

&lt;h4 id=&quot;visualizing-the-expected-number-of-turns&quot;&gt;Visualizing the expected number of turns&lt;/h4&gt;

&lt;p&gt;Since this is a function of two variables, we can visualize it with a contour plot.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/formula.png&quot; alt=&quot;Contour plot of function&quot; /&gt;&lt;/p&gt;

&lt;p&gt;As the color gets darker, the expected number of turns decreases, ie we’re more likely to win. As we would expect, the plot gets darker for higher values of \(p_1\) and lower values of \(p_2\), ie to the right and bottom of the plot. What’s interesting to note is that the contour lines are “squeezed” more toward the right than the bottom, indicating that a high \(p_1\) has a stronger effect than a low \(p_2\). For example, if \(p_2=0\) and \(p_1=0.2\), \(\eqref{eq:one}\) gives us \(e_5=21\), whereas if \(p_1=1\) and \(p_2=0.8\) we get \(e_5=1\).&lt;/p&gt;

&lt;h4 id=&quot;verification-via-simulation&quot;&gt;Verification via simulation&lt;/h4&gt;

&lt;p&gt;Another way to calculate \(e_5\) empirically is to simulate \(G\) games for each value of \(p_1\) and \(p_2\), and then average the number of turns the game takes to finish over all the games. Doing this with \(G=1000\), I get this plot:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/simulation.png&quot; alt=&quot;Contour plot of simulation&quot; /&gt;&lt;/p&gt;

&lt;p&gt;which matches the previous plot. The squiggles are due to randomness.&lt;/p&gt;

&lt;h3 id=&quot;analyzing-some-special-cases&quot;&gt;Analyzing some special cases&lt;/h3&gt;

&lt;p&gt;In reality, \(p_1\) and \(p_2\) tend to be related to one another, since shots that are harder for one player tend to be harder for the other player as well.&lt;/p&gt;

&lt;p&gt;Let us analyse some special cases, corresponding to the straight lines in the following plot.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/straight_lines.png&quot; alt=&quot;Contour plot with straight lines&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;both-players-are-equally-good-shooters&quot;&gt;Both players are equally good shooters&lt;/h4&gt;
&lt;p&gt;This corresponds to the red line above. Here, \(p_1 = p_2\), and \(\eqref{eq:one}\) simplifies to&lt;/p&gt;

\[e_5 = 1 + \frac{5}{p_1}\]

&lt;p&gt;To minimize this, we should pick shots with a \(p_1\) as high as possible. For example, if we keep making layups at a probability of \(0.9\) each, we’d expect the game to be over in less than \(7\) turns.&lt;/p&gt;

&lt;h4 id=&quot;player-1-is-a-slightly-better-shooter-than-player-2&quot;&gt;Player 1 is a slightly better shooter than Player 2&lt;/h4&gt;

&lt;p&gt;Let’s say Player 1 always shoots 10% better than Player 2 for any shot. That is, \(p_2 = min(p_1 - 0.1, 0)\) (yellow line above), and when \(p1&amp;gt;0.1\), \(\eqref{eq:one}\) simplifies to&lt;/p&gt;

\[e_5 = 1 + 5 \frac{1 - p_1}{p_1 (1.1 - p_1)}\]

&lt;p&gt;In the range \(p_1 \in [0, 1]\), this function looks like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/player_1_better.png&quot; alt=&quot;Player 1 better&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It is minimized at \(p_1=1\), where \(e_5=1\), that is, the game ends in one turn. Again, Player 1 wants to pick their highest probability shot.&lt;/p&gt;

&lt;h4 id=&quot;player-2-is-a-slightly-better-shooter-than-player-1&quot;&gt;Player 2 is a slightly better shooter than Player 1&lt;/h4&gt;

&lt;p&gt;Here, we set \(p_2 = p_1 + 0.1\) (orange line above), which gives us for \(p_1 &amp;lt; 0.9\)&lt;/p&gt;

\[e_5 = 1 + 5 \frac{1 - p_1}{p_1 (0.9 - p_1)}\]

&lt;p&gt;In the range \(p_1 \in [0, 1]\), this function looks like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/player_1_worse.png&quot; alt=&quot;Player 1 worse&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Interestingly, we cannot simply maximize \(p_1\) here, because once \(p_2\) gets closer to \(1\), we can never win. However, the optimal \(p_1\) is still pretty high, at around \(p_1=0.684\), giving \(e_5=11.7\). If Player 2 (for whom \(e_5\) looks like the previous section) shoots shots at \(p_2&amp;lt;0.4\) (eg three-point shots), they will lose the game, despite being a better shooter.&lt;/p&gt;

&lt;h3 id=&quot;real-world-strategies&quot;&gt;Real world strategies&lt;/h3&gt;

&lt;p&gt;In the real world, winning is not the only objective. You don’t want the game to take indefinitely long, and you’d be ridiculed if you kept taking layups. You also have no concrete way to estimate \(p_1\) and \(p_2\) (unless you’ve been playing an opponent for a long time and are keeping a tab on their shooting percentages), and so have to rely on intuition. Some general points to keep in mind:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;You’re generally better off taking high percentage shots, even if you’re much better at a low-percentage shot than an opponent. As an example, let’s say you’ve been practicing half-court shots all year, and you can shoot a half court shot at an impressive 20% (\(p_1=0.2\)). You’re sure your opponent can’t shoot that shot if you make it (\(p_2=0\)). Your expected number of turns to win is still \(e_5=21\). Compare that to you shooting a 60% shot which your opponent can also make at 60% (eg a free throw), which lets you win in \(e_5=9.3\) turns. This is more than twice as good as the half court shot! This is because if you and your opponent both make the shot, it’s still your turn. Whereas if you miss your shot by attempting a low percentage shot, your turn is over. You can always win the game in 6-7 turns simply by taking layups at the same percentage as your opponent (assuming \(p_1\) of 0.8-0.9). If we set \(p_2=0\), and solve for \(e_5=7\), we get \(p_1 = 0.45\). That is, even if your opponent can’t make the shot you make at all, there’s generally no point in taking shots that have \(p_1 &amp;lt; 0.45\) - you’re better off shooting layups.&lt;/li&gt;
  &lt;li&gt;If you can guess \(p_1\) and \(p_2\) for a bunch of candidate shots, plug them into \(\eqref{eq:one}\) to figure out which shots are your best bet to win.&lt;/li&gt;
  &lt;li&gt;Instead of practicing low percentage shots (like behind the backboard arc shots), practice your high percentage shots (like free throws or left handed layups) instead. If you and your opponent can both make a behind the backboard arc shot at 10%, and you practice to push yourself to 20%, you still go from winning in 51 turns to 23 turns. Compare that with converting your free throw from 60% to 70% - that pushes your expected turns from 9.3 to 6.4.&lt;/li&gt;
  &lt;li&gt;Find novel-looking high percentage shots so that you can use an effective strategy while not getting ridiculed for just attempting layups. Examples are left handed close up shots, floaters, bank shots.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I’d also recommend playing HORSE with modified rules, eg&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;No shots from inside the paint.&lt;/li&gt;
  &lt;li&gt;No repeated shots from the same spot in a turn.&lt;/li&gt;
  &lt;li&gt;If both players make three shots in a row, it’s Player 2’s turn.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This should reduce the effectiveness of the layup strategy and make the game more fun.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;
The code for the plots in this post is &lt;a href=&quot;https://colab.research.google.com/drive/18yF27zs80UF9TgFm4p7I5U4cDYn1V6A3?usp=sharing&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><summary type="html"></summary></entry></feed>